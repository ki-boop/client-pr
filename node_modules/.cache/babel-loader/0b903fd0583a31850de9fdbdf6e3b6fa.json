{"ast":null,"code":"export const castPizzaItemsToPizzaViews = items => {\n  const result = [];\n  const pizzas = items.sort((a, b) => a.title >= b.title ? 1 : -1);\n\n  for (let i = 0; i < pizzas.length; i++) {\n    let currentPizzasCount = 1;\n    let currentRatingSum = pizzas[i].rating;\n    let currentPriceSum = pizzas[i].price;\n    const newItem = {\n      title: pizzas[i].title,\n      imageUrl: pizzas[i].imageUrl,\n      size: [pizzas[i].size],\n      type: [pizzas[i].type],\n      category: pizzas[i].category,\n      rating: 0,\n      price: 0\n    };\n\n    for (; pizzas[i + 1] && pizzas[i].title === pizzas[i + 1].title; i++) {\n      currentPizzasCount++;\n      newItem.size.push(pizzas[i + 1].size);\n      newItem.type.push(pizzas[i + 1].type);\n      currentRatingSum += pizzas[i + 1].rating;\n      currentPriceSum += pizzas[i + 1].price;\n    }\n\n    newItem.size = Array.from(new Set(newItem.size)).sort((a, b) => a - b);\n    newItem.type = Array.from(new Set(newItem.type)).sort((a, b) => b > a ? 1 : -1);\n    newItem.rating = currentRatingSum / currentPizzasCount;\n    newItem.price = currentPriceSum / currentPizzasCount;\n    result.push(newItem);\n  }\n\n  return result;\n};","map":{"version":3,"names":["castPizzaItemsToPizzaViews","items","result","pizzas","sort","a","b","title","i","length","currentPizzasCount","currentRatingSum","rating","currentPriceSum","price","newItem","imageUrl","size","type","category","push","Array","from","Set"],"sources":["/Users/kirillkarpakov/WebstormProjects/client-pr/src/store/pizza/utils/cast-pizza-items-to-views.ts"],"sourcesContent":["import { IPizzaResponse, IPizzaView } from '../types';\n\n\nexport const castPizzaItemsToPizzaViews = (items: IPizzaResponse[]): IPizzaView[] => {\n\tconst result: IPizzaView[] = [];\n\tconst pizzas = items.sort((a, b) => a.title >= b.title ? 1 : -1);\n\n\tfor (let i = 0; i < pizzas.length; i++) {\n\t\tlet currentPizzasCount: number = 1;\n\t\tlet currentRatingSum: number = pizzas[i].rating;\n\t\tlet currentPriceSum: number = pizzas[i].price;\n\n\t\tconst newItem: IPizzaView = {\n\t\t\ttitle: pizzas[i].title,\n\t\t\timageUrl: pizzas[i].imageUrl,\n\t\t\tsize: [pizzas[i].size],\n\t\t\ttype: [pizzas[i].type],\n\t\t\tcategory: pizzas[i].category,\n\t\t\trating: 0,\n\t\t\tprice: 0\n\t\t};\n\n\t\tfor (; pizzas[i + 1] && pizzas[i].title === pizzas[i + 1].title; i++) {\n\t\t\tcurrentPizzasCount++;\n\t\t\tnewItem.size.push(pizzas[i + 1].size);\n\t\t\tnewItem.type.push(pizzas[i + 1].type);\n\t\t\tcurrentRatingSum += pizzas[i + 1].rating;\n\t\t\tcurrentPriceSum += pizzas[i + 1].price;\n\t\t}\n\n\t\tnewItem.size = Array.from(new Set(newItem.size)).sort((a, b) => a - b);\n\t\tnewItem.type = Array.from(new Set(newItem.type)).sort((a, b) => b > a ? 1 : -1);\n\t\tnewItem.rating = currentRatingSum / currentPizzasCount;\n\t\tnewItem.price = currentPriceSum / currentPizzasCount;\n\n\t\tresult.push(newItem);\n\t}\n\n\treturn result;\n};"],"mappings":"AAGA,OAAO,MAAMA,0BAA0B,GAAIC,KAAD,IAA2C;EACpF,MAAMC,MAAoB,GAAG,EAA7B;EACA,MAAMC,MAAM,GAAGF,KAAK,CAACG,IAAN,CAAW,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACE,KAAF,IAAWD,CAAC,CAACC,KAAb,GAAqB,CAArB,GAAyB,CAAC,CAA/C,CAAf;;EAEA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,MAAM,CAACM,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;IACvC,IAAIE,kBAA0B,GAAG,CAAjC;IACA,IAAIC,gBAAwB,GAAGR,MAAM,CAACK,CAAD,CAAN,CAAUI,MAAzC;IACA,IAAIC,eAAuB,GAAGV,MAAM,CAACK,CAAD,CAAN,CAAUM,KAAxC;IAEA,MAAMC,OAAmB,GAAG;MAC3BR,KAAK,EAAEJ,MAAM,CAACK,CAAD,CAAN,CAAUD,KADU;MAE3BS,QAAQ,EAAEb,MAAM,CAACK,CAAD,CAAN,CAAUQ,QAFO;MAG3BC,IAAI,EAAE,CAACd,MAAM,CAACK,CAAD,CAAN,CAAUS,IAAX,CAHqB;MAI3BC,IAAI,EAAE,CAACf,MAAM,CAACK,CAAD,CAAN,CAAUU,IAAX,CAJqB;MAK3BC,QAAQ,EAAEhB,MAAM,CAACK,CAAD,CAAN,CAAUW,QALO;MAM3BP,MAAM,EAAE,CANmB;MAO3BE,KAAK,EAAE;IAPoB,CAA5B;;IAUA,OAAOX,MAAM,CAACK,CAAC,GAAG,CAAL,CAAN,IAAiBL,MAAM,CAACK,CAAD,CAAN,CAAUD,KAAV,KAAoBJ,MAAM,CAACK,CAAC,GAAG,CAAL,CAAN,CAAcD,KAA1D,EAAiEC,CAAC,EAAlE,EAAsE;MACrEE,kBAAkB;MAClBK,OAAO,CAACE,IAAR,CAAaG,IAAb,CAAkBjB,MAAM,CAACK,CAAC,GAAG,CAAL,CAAN,CAAcS,IAAhC;MACAF,OAAO,CAACG,IAAR,CAAaE,IAAb,CAAkBjB,MAAM,CAACK,CAAC,GAAG,CAAL,CAAN,CAAcU,IAAhC;MACAP,gBAAgB,IAAIR,MAAM,CAACK,CAAC,GAAG,CAAL,CAAN,CAAcI,MAAlC;MACAC,eAAe,IAAIV,MAAM,CAACK,CAAC,GAAG,CAAL,CAAN,CAAcM,KAAjC;IACA;;IAEDC,OAAO,CAACE,IAAR,GAAeI,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQR,OAAO,CAACE,IAAhB,CAAX,EAAkCb,IAAlC,CAAuC,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAArD,CAAf;IACAS,OAAO,CAACG,IAAR,GAAeG,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQR,OAAO,CAACG,IAAhB,CAAX,EAAkCd,IAAlC,CAAuC,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,GAAGD,CAAJ,GAAQ,CAAR,GAAY,CAAC,CAA9D,CAAf;IACAU,OAAO,CAACH,MAAR,GAAiBD,gBAAgB,GAAGD,kBAApC;IACAK,OAAO,CAACD,KAAR,GAAgBD,eAAe,GAAGH,kBAAlC;IAEAR,MAAM,CAACkB,IAAP,CAAYL,OAAZ;EACA;;EAED,OAAOb,MAAP;AACA,CApCM"},"metadata":{},"sourceType":"module"}